<%= render 'shared/flash_message' %>
<%= render 'shared/plot_menu', { plot: @plot } %>

<div class="bg-base-200 text-gray-700 pb-10">
  <div class="flex border-b-4 border-base-300">
    <div class="flex-1 font-light mx-4 m-2 text-4xl drop-shadow-2xl">カードを更新する</div>
  </div>
  <div class="mx-4">
    <%= form_with model: @card, local: true do |f| %>
      <div class="grid grid-cols-1">
        <%= f.label :シーンナンバー, class: 'my-1 text-xl' %>
        <%= f.number_field :scene, class: 'my-1 input input-bordered input-secondary input-lg w-full md:input-md max-w-full', placeholder: "シーンナンバー" %>
        <%= f.label :シーンタイトル, class: 'my-1 text-xl' %>
        <%= f.text_field :title, class: 'my-1 input input-bordered input-secondary input-lg md:input-md w-full max-w-full', placeholder: "タイトル" %>
        <%= f.label :開始時間, class: 'my-1 text-xl' %>
        <%= f.datetime_field :time_start, class: 'select select-secondary select-lg md:select-md font-light' %>
        <%= f.label :終了時間, class: 'my-1 text-xl' %>
        <%= f.datetime_field :time_end, class: 'select select-secondary select-lg md:select-md font-light'%>
        <%= f.label :場所, class: 'my-1 text-xl' %>
        <%= f.text_field :current_location, class: 'my-1 input input-bordered input-secondary input-lg md:input-md w-full max-w-full', placeholder: "場所" %>
        <%= f.label :視点, class: 'my-1 text-xl' %>
        <%= f.text_field :point_of_view, class: 'my-1 input input-bordered input-secondary input-lg md:input-md w-full max-w-full', placeholder: "視点" %>
        <%= f.label :感情変動値, class: 'my-1 text-xl' %>
        <%= f.number_field :emotional_value , class: 'my-1 input input-bordered input-secondary input-lg md:input-md w-full max-w-full', placeholder: "感情変動値" %>
        <%= f.label :シーン内容, class: 'my-1 text-xl' %>
        <%= f.text_area :body, class: 'my-1 textarea textarea-secondary textarea-lg md:textarea-md w-full max-w-full h-24', placeholder: "シーンの内容" %>
        <%= f.label :シーンタイプ, class: 'my-1 text-xl' %>
        <%= f.collection_select :scene_type, Card.scene_types.keys, :to_s, :to_s, { selected: "explicit" }, { class: "select select-secondary select-lg md:select-md font-light" } %>
        <%= f.label :関連伏線, class: 'my-1 text-xl' %>
        <div>
          <%= f.collection_check_boxes :foreshadowing_ids, @foreshadowing_cards, :id, :name do |cb| %>
            <div class="relative">
              <%= cb.check_box(class: 'checkbox') %>
              <%= cb.label(class: 'ml-7 label-text absolute inset-0') %>
            </div>
          <% end %>
        </div>
        <%= f.submit '更新する', class: 'btn text-gray-100 bg-gray-900 my-2' %>
      </div>
    <% end %>
  </div>
</div>

<%= render 'chats/chat' %>